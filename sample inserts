------------------------------------------------------------------------------
-- 1) USERS: Create a few users (including an 'Admin')
------------------------------------------------------------------------------
INSERT INTO dbo.USERS (USERNAME, [PASSWORD], USER_GROUP)
VALUES
('admin','adminpass','Admin'),
('user1','user1pass','BG1'),
('user2','user2pass','BG2'),
('john','john123','BG1');
GO

------------------------------------------------------------------------------
-- 2) BUSINESS_GROUPS
------------------------------------------------------------------------------
INSERT INTO dbo.BUSINESS_GROUPS (GROUP_NAME, DESCRIPTION, EMAIL)
VALUES
('BG1','Main business group','bg1@example.com'),
('BG2','Secondary business group','bg2@example.com'),
('Admin','Administrator group','admin@example.com');
GO

------------------------------------------------------------------------------
-- 3) GROUP_PERMISSIONS (optional example)
------------------------------------------------------------------------------
INSERT INTO dbo.GROUP_PERMISSIONS (GROUP_NAME, TARGET_TABLE)
VALUES
('BG1','dbo.SomeTable'),
('BG2','dbo.ChildTable');
GO

------------------------------------------------------------------------------
-- 4) BRM_RULE_TYPES
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_RULE_TYPES (RULE_TYPE_NAME)
VALUES
('Standard'),
('Advanced'),
('Lookup');
GO

------------------------------------------------------------------------------
-- 5) BRM_RULE_GROUPS
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_RULE_GROUPS (GROUP_NAME, DESCRIPTION)
VALUES
('RG1','Sample rule group'),
('RG2','Another sample group');
GO

------------------------------------------------------------------------------
-- 6) BRM_RULES
--   Some rules referencing above groups, with varied statuses/operation types
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_RULES (
  GROUP_ID, PARENT_RULE_ID, RULE_TYPE_ID, RULE_NAME, RULE_SQL,
  EFFECTIVE_START_DATE, EFFECTIVE_END_DATE, STATUS, VERSION,
  CREATED_BY, DESCRIPTION, OPERATION_TYPE, BUSINESS_JUSTIFICATION,
  CREATED_TIMESTAMP, UPDATED_BY, OWNER_GROUP, CLUSTER_NAME,
  APPROVAL_STATUS, IS_GLOBAL, CRITICAL_RULE, CRITICAL_SCOPE,
  CDC_TYPE, LIFECYCLE_STATE, DECISION_TABLE_ID
)
VALUES
-- Rule #1
(1, NULL, 1, 'Rule1_SimpleSelect', 
 'SELECT 1;', 
 '2025-01-01', NULL, 'ACTIVE', 1,
 'admin', 'Rule returning 1 => pass', 'SELECT', 'Test only', 
 GETDATE(), NULL, 'BG1', 'ClusterA',
 'APPROVED', 0, 0, 'NONE', 'NONE', 'ACTIVE', NULL),

-- Rule #2
(1, NULL, 2, 'Rule2_Insert',
 'INSERT INTO SomeTable (Col) VALUES (1); SELECT 1;',
 '2025-01-01', NULL, 'INACTIVE', 1,
 'admin', 'Sample rule doing an INSERT', 'INSERT', 'ETL Insert usage',
 GETDATE(), NULL, 'BG1', 'ClusterA',
 'APPROVAL_IN_PROGRESS', 0, 1, 'GROUP', 'NONE', 'UNDER_APPROVAL', NULL),

-- Rule #3
(2, 1,   1, 'Rule3_ChildOfRule1',
 'SELECT 0;', 
 '2025-02-01', NULL, 'ACTIVE', 2,
 'user1','Child rule returning 0 => fail','SELECT','Test child rule',
 GETDATE(), 'admin','BG2','ClusterB',
 'APPROVED', 0, 0, 'NONE','NONE','ACTIVE', NULL);
GO

------------------------------------------------------------------------------
-- 7) BRM_RULE_TABLE_DEPENDENCIES
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_RULE_TABLE_DEPENDENCIES 
(RULE_ID, DATABASE_NAME, TABLE_NAME, COLUMN_NAME, COLUMN_OP)
VALUES
(1, 'SampleDB','dbo.SomeTable','Col1','READ'),
(2, 'SampleDB','dbo.SomeTable','Col','WRITE'),
(3, 'SampleDB','dbo.ChildTable','ChildCol','READ');
GO

------------------------------------------------------------------------------
-- 8) BRM_AUDIT_LOG (example logs for rules #1 and #2)
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_AUDIT_LOG 
(ACTION, TABLE_NAME, RECORD_ID, ACTION_BY, OLD_DATA, NEW_DATA)
VALUES
('INSERT','BRM_RULES','1','admin',NULL,'{ "RULE_NAME": "Rule1_SimpleSelect" }'),
('INSERT','BRM_RULES','2','admin',NULL,'{ "RULE_NAME": "Rule2_Insert" }'),
('UPDATE','BRM_RULES','2','admin','{ "STATUS": "INACTIVE" }','{ "STATUS": "ACTIVE" }');
GO

------------------------------------------------------------------------------
-- 9) BRM_RULE_LINEAGE (optional example data)
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_RULE_LINEAGE (SOURCE_RULE_ID, TARGET_RULE_ID, RELATION_TYPE)
VALUES
(1, 3, 'Child'),
(2, 3, 'GlobalCritical');
GO

------------------------------------------------------------------------------
-- 10) BRM_GROUP_BACKUPS (optional stub)
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_GROUP_BACKUPS (GROUP_NAME, BACKUP_DATA)
VALUES
('BG1','{"backup":"some data"}');
GO

------------------------------------------------------------------------------
-- 11) BRM_COLUMN_MAPPING (optional example)
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_COLUMN_MAPPING (SOURCE_RULE_ID, RULE_ID, COLUMN_NAME, MAPPING_DETAILS)
VALUES
(1,2,'Col','Map from rule1 col => rule2 col'),
(2,3,'Col','Chained mapping');
GO

------------------------------------------------------------------------------
-- 12) BRM_CUSTOM_RULE_GROUPS
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_CUSTOM_RULE_GROUPS 
(CUSTOM_GROUP_NAME, OWNER_BUSINESS_GROUP, CREATED_BY, CREATED_TIMESTAMP)
VALUES
('MyCustomGroup1','BG1','admin', GETDATE()),
('MyCustomGroup2','BG2','user1', GETDATE());
GO

------------------------------------------------------------------------------
-- 13) BRM_CUSTOM_GROUP_MEMBERS
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_CUSTOM_GROUP_MEMBERS (CUSTOM_GROUP_ID, RULE_ID)
VALUES
(1, 1),
(1, 3),
(2, 2);
GO

------------------------------------------------------------------------------
-- 14) BUSINESS_GROUP_APPROVERS
------------------------------------------------------------------------------
INSERT INTO dbo.BUSINESS_GROUP_APPROVERS (GROUP_NAME, USERNAME)
VALUES
('BG1','user1'),
('BG1','admin'),
('BG2','user2');
GO

------------------------------------------------------------------------------
-- 15) BRM_RULE_APPROVALS (example approvals for rule #2)
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_RULE_APPROVALS 
(RULE_ID, GROUP_NAME, USERNAME, APPROVED_FLAG, APPROVED_TIMESTAMP, APPROVAL_STAGE)
VALUES
(2, 'BG1','user1',0, NULL, 1),  -- waiting for user1
(2, 'BG1','admin',0, NULL, 2);  -- then admin
GO

------------------------------------------------------------------------------
-- 16) BRM_CUSTOM_GROUP_BACKUPS
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_CUSTOM_GROUP_BACKUPS 
(CUSTOM_GROUP_ID, BACKUP_TIMESTAMP, BACKUP_VERSION, BACKUP_JSON)
VALUES
(1, GETDATE(), 1, '{"group_name":"MyCustomGroup1","members":[1,3]}');
GO

------------------------------------------------------------------------------
-- 17) BRM_GLOBAL_CRITICAL_LINKS (link rule2 => rule3)
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_GLOBAL_CRITICAL_LINKS (GCR_RULE_ID, TARGET_RULE_ID)
VALUES
(2,3);
GO

------------------------------------------------------------------------------
-- 18) RULE_SCHEDULES
------------------------------------------------------------------------------
INSERT INTO dbo.RULE_SCHEDULES (RULE_ID, SCHEDULE_TIME, STATUS, CREATED_TIMESTAMP)
VALUES
(1, DATEADD(HOUR,1,GETDATE()), 'Scheduled', GETDATE()),
(3, DATEADD(HOUR,2,GETDATE()), 'Scheduled', GETDATE());
GO

------------------------------------------------------------------------------
-- 19) BRM_RULE_COMMENTS (optional example)
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_RULE_COMMENTS (RULE_ID, COMMENT_TEXT)
VALUES
(1, 'Initial comment on Rule1'),
(2, 'Comment regarding insertion rule');
GO

------------------------------------------------------------------------------
-- 20) DECISION_TABLES
------------------------------------------------------------------------------
INSERT INTO dbo.DECISION_TABLES (TABLE_NAME, DESCRIPTION)
VALUES
('MyDecisionTable','Simple decision table sample');
GO

------------------------------------------------------------------------------
-- 21) RULE_CONFLICTS
------------------------------------------------------------------------------
INSERT INTO dbo.RULE_CONFLICTS (RULE_ID1, RULE_ID2, PRIORITY)
VALUES
(1, 2, 10),
(2, 3, 5);
GO

------------------------------------------------------------------------------
-- 22) COMPOSITE_RULES
------------------------------------------------------------------------------
INSERT INTO dbo.COMPOSITE_RULES (CRULE_NAME, LOGIC_EXPR, ACTION_ON_PASS)
VALUES
('Composite1','Rule1==PASS AND Rule3==PASS','Send alert'),
('Composite2','Rule2==PASS','Write to table');
GO

------------------------------------------------------------------------------
-- 23) RULE_SNAPSHOTS
------------------------------------------------------------------------------
INSERT INTO dbo.RULE_SNAPSHOTS (SNAPSHOT_NAME, CREATED_BY, SNAPSHOT_JSON)
VALUES
('InitialSnapshot','admin','[{\"RULE_ID\":1,\"RULE_NAME\":\"Rule1_SimpleSelect\"}]');
GO

------------------------------------------------------------------------------
-- 24) RULE_TAGS
------------------------------------------------------------------------------
INSERT INTO dbo.RULE_TAGS (RULE_ID, TAG_NAME)
VALUES
(1, 'Finance'),
(2, 'CriticalInsert'),
(3, 'TestRule');
GO

------------------------------------------------------------------------------
-- 25) DATA_VALIDATIONS
------------------------------------------------------------------------------
INSERT INTO dbo.DATA_VALIDATIONS (TABLE_NAME, COLUMN_NAME, VALIDATION_TYPE, PARAMS)
VALUES
('dbo.SomeTable','Col','NOT NULL',''),
('dbo.ChildTable','ChildCol','RANGE','min=0,max=100');
GO

------------------------------------------------------------------------------
-- 26) RULE_EXECUTION_LOGS
------------------------------------------------------------------------------
INSERT INTO dbo.RULE_EXECUTION_LOGS (RULE_ID, PASS_FLAG, MESSAGE, RECORD_COUNT)
VALUES
(1, 1, 'Returned 1 => pass', 1),
(3, 0, 'Returned 0 => fail', 0);
GO

------------------------------------------------------------------------------
-- 27) BRM_RULE_LOCKS (optional example to show a locked rule)
------------------------------------------------------------------------------
INSERT INTO dbo.BRM_RULE_LOCKS (RULE_ID, LOCKED_BY, LOCK_TIMESTAMP)
VALUES
(2, 'admin', GETDATE());
GO